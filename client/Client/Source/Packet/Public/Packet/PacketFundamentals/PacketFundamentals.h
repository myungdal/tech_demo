// ============================================================================
// myungdal tech-demo project
// 
// Author: 안명달 (Myungdal Ahn)
// Email: mooondal@gmail.com
// GitHub: https://github.com/myungdal/tech_demo.git
// ============================================================================

#pragma once

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// PacketFundamentals.h
// 패킷 기본 타입 정의 - PCH 의존 없이 단독 사용 가능
// PACKET_TYPE.h 및 기타 패킷 헤더에서 include
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include <cstdint>
#include "Common/Key/StrongType/StrongType.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Packet Type
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

using PacketType = StrongType<uint16_t>;

constexpr PacketType INVALID_PACKET_TYPE = PacketType(UINT16_MAX);

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Packet Size
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

using PacketSize = uint32_t;

constexpr PacketSize INVALID_PACKET_SIZE = UINT32_MAX;

constexpr PacketSize MAX_PACKET_BUFFER_SIZE_FACTOR = 16;
constexpr PacketSize MAX_PACKET_BUFFER_SIZE = (1 << MAX_PACKET_BUFFER_SIZE_FACTOR);
constexpr PacketSize MAX_PACKET_SAFE_DATA_SIZE = (1 << 15);

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Packet Trait
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

using PacketTraitType = uint8_t;

constexpr PacketTraitType INVALID_PACKET_TRAIT_TYPE = 0;
constexpr PacketTraitType PACKET_TRAIT_TYPE_NOTIFY = 1;
constexpr PacketTraitType PACKET_TRAIT_TYPE_REQ = 2;
constexpr PacketTraitType PACKET_TRAIT_TYPE_ACK = 3;
constexpr PacketTraitType PACKET_TRAIT_TYPE_PARAM = 4;

using PacketTraitNotify = PacketTraitType;
using PacketTraitReq = PacketTraitType;
using PacketTraitAck = PacketTraitType;
using PacketTraitParam = PacketTraitType;

constexpr PacketTraitNotify NOTIFY = 1;
constexpr PacketTraitReq REQ = 2;
constexpr PacketTraitAck ACK = 3;
constexpr PacketTraitParam PARAM = 4;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Handle Result
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

enum class HandleResult : uint8_t
{
	NOT_EXISTS = 0,
	OK = 1,
	FAILED = 2
};

