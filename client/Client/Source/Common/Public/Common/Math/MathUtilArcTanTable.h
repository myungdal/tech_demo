// ============================================================================
// myungdal tech-demo project
// 
// Author: 안명달 (Myungdal Ahn)
// Email: mooondal@gmail.com
// GitHub: https://github.com/myungdal/tech_demo.git
// ============================================================================

#pragma once

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// 아크탄젠트 룩업 테이블
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

namespace MathUtil
{
	// 아크탄젠트 함수 룩업 테이블 (0 ~ 45도, 1,025개 항목).
	// - 범위: 0 ~ 45도 (0 ~ π/4 라디안)
	// - 해상도: 1,025개 항목
	// - 값 범위: Angle 타입 (0 ~ 8192, 45도)
	static constexpr Angle gArcTanTable[1'025]
	{
		0, 10, 20, 30, 40, 50, 61, 71, 81, 91, 101, 112, 122, 132, 142, 152, 162, 173, 183, 193, 203, 213, 224, 234, 244, 254, 264, 274, 285, 295, 305, 315, 325, 336, 346, 356, 366, 376, 386, 397, 407, 417, 427, 437, 447, 458, 468, 478, 488, 498, 508, 519, 529, 539, 549, 559, 569, 579, 590, 600, 610, 620, 630, 640, 651, 661, 671, 681, 691, 701, 711, 722, 732, 742, 752, 762, 772, 782, 792, 803, 813, 823, 833, 843, 853, 863, 873, 884, 894, 904, 914, 924, 934, 944, 954, 964, 974, 985, 995, 1005, 1015,
		1025, 1035, 1045, 1055, 1065, 1075, 1085, 1096, 1106, 1116, 1126, 1136, 1146, 1156, 1166, 1176, 1186, 1196, 1206, 1216, 1226, 1236, 1246, 1256, 1266, 1277, 1287, 1297, 1307, 1317, 1327, 1337, 1347, 1357, 1367, 1377, 1387, 1397, 1407, 1417, 1427, 1437, 1447, 1457, 1467, 1477, 1487, 1497, 1507, 1517, 1527, 1537, 1547, 1556, 1566, 1576, 1586, 1596, 1606, 1616, 1626, 1636, 1646, 1656, 1666, 1676, 1686, 1696, 1706, 1715, 1725, 1735, 1745, 1755, 1765, 1775, 1785, 1795, 1805, 1814, 1824, 1834, 1844, 1854, 1864, 1874, 1884, 1893, 1903, 1913, 1923, 1933, 1943, 1952, 1962, 1972, 1982, 1992, 2002, 2011, 2021, 2031, 2041,
		2051, 2060, 2070, 2080, 2090, 2100, 2109, 2119, 2129, 2139, 2148, 2158, 2168, 2178, 2187, 2197, 2207, 2217, 2226, 2236, 2246, 2255, 2265, 2275, 2285, 2294, 2304, 2314, 2323, 2333, 2343, 2352, 2362, 2372, 2381, 2391, 2401, 2410, 2420, 2430, 2439, 2449, 2459, 2468, 2478, 2488, 2497, 2507, 2516, 2526, 2536, 2545, 2555, 2564, 2574, 2583, 2593, 2603, 2612, 2622, 2631, 2641, 2650, 2660, 2669, 2679, 2688, 2698, 2708, 2717, 2727, 2736, 2746, 2755, 2765, 2774, 2784, 2793, 2802, 2812, 2821, 2831, 2840, 2850, 2859, 2869, 2878, 2887, 2897, 2906, 2916, 2925, 2935, 2944, 2953, 2963, 2972, 2981, 2991, 3000, 3010, 3019, 3028, 3038, 3047, 3056, 3066,
		3075, 3084, 3094, 3103, 3112, 3122, 3131, 3140, 3149, 3159, 3168, 3177, 3187, 3196, 3205, 3214, 3224, 3233, 3242, 3251, 3260, 3270, 3279, 3288, 3297, 3307, 3316, 3325, 3334, 3343, 3352, 3362, 3371, 3380, 3389, 3398, 3407, 3416, 3426, 3435, 3444, 3453, 3462, 3471, 3480, 3489, 3498, 3508, 3517, 3526, 3535, 3544, 3553, 3562, 3571, 3580, 3589, 3598, 3607, 3616, 3625, 3634, 3643, 3652, 3661, 3670, 3679, 3688, 3697, 3706, 3715, 3724, 3733, 3742, 3751, 3759, 3768, 3777, 3786, 3795, 3804, 3813, 3822, 3831, 3839, 3848, 3857, 3866, 3875, 3884, 3893, 3901, 3910, 3919, 3928, 3937, 3945, 3954, 3963, 3972, 3981, 3989, 3998, 4007, 4016, 4024, 4033, 4042, 4051, 4059, 4068, 4077, 4085, 4094,
		4103, 4112, 4120, 4129, 4138, 4146, 4155, 4164, 4172, 4181, 4189, 4198, 4207, 4215, 4224, 4233, 4241, 4250, 4258, 4267, 4275, 4284, 4293, 4301, 4310, 4318, 4327, 4335, 4344, 4352, 4361, 4369, 4378, 4386, 4395, 4403, 4412, 4420, 4429, 4437, 4446, 4454, 4462, 4471, 4479, 4488, 4496, 4505, 4513, 4521, 4530, 4538, 4546, 4555, 4563, 4572, 4580, 4588, 4597, 4605, 4613, 4622, 4630, 4638, 4646, 4655, 4663, 4671, 4680, 4688, 4696, 4704, 4713, 4721, 4729, 4737, 4745, 4754, 4762, 4770, 4778, 4787, 4795, 4803, 4811, 4819, 4827, 4836, 4844, 4852, 4860, 4868, 4876, 4884, 4892, 4901, 4909, 4917, 4925, 4933, 4941, 4949, 4957, 4965, 4973, 4981, 4989, 4997, 5005, 5013, 5021, 5029, 5037, 5045, 5053, 5061, 5069, 5077, 5085, 5093, 5101, 5109, 5117,
		5125, 5133, 5141, 5148, 5156, 5164, 5172, 5180, 5188, 5196, 5204, 5211, 5219, 5227, 5235, 5243, 5251, 5258, 5266, 5274, 5282, 5290, 5297, 5305, 5313, 5321, 5328, 5336, 5344, 5352, 5359, 5367, 5375, 5383, 5390, 5398, 5406, 5413, 5421, 5429, 5436, 5444, 5452, 5459, 5467, 5475, 5482, 5490, 5497, 5505, 5513, 5520, 5528, 5535, 5543, 5550, 5558, 5566, 5573, 5581, 5588, 5596, 5603, 5611, 5618, 5626, 5633, 5641, 5648, 5656, 5663, 5671, 5678, 5686, 5693, 5700, 5708, 5715, 5723, 5730, 5738, 5745, 5752, 5760, 5767, 5774, 5782, 5789, 5797, 5804, 5811, 5819, 5826, 5833, 5841, 5848, 5855, 5862, 5870, 5877, 5884, 5892, 5899, 5906, 5913, 5921, 5928, 5935, 5942, 5949, 5957, 5964, 5971, 5978, 5985, 5993, 6000, 6007, 6014, 6021, 6028, 6036, 6043, 6050, 6057, 6064, 6071, 6078, 6085, 6093, 6100, 6107, 6114, 6121, 6128, 6135, 6142,
		6149, 6156, 6163, 6170, 6177, 6184, 6191, 6198, 6205, 6212, 6219, 6226, 6233, 6240, 6247, 6254, 6261, 6268, 6275, 6282, 6288, 6295, 6302, 6309, 6316, 6323, 6330, 6337, 6344, 6350, 6357, 6364, 6371, 6378, 6385, 6391, 6398, 6405, 6412, 6419, 6425, 6432, 6439, 6446, 6453, 6459, 6466, 6473, 6480, 6486, 6493, 6500, 6506, 6513, 6520, 6527, 6533, 6540, 6547, 6553, 6560, 6567, 6573, 6580, 6586, 6593, 6600, 6606, 6613, 6620, 6626, 6633, 6639, 6646, 6653, 6659, 6666, 6672, 6679, 6685, 6692, 6698, 6705, 6711, 6718, 6724, 6731, 6737, 6744, 6750, 6757, 6763, 6770, 6776, 6783, 6789, 6796, 6802, 6809, 6815, 6821, 6828, 6834, 6841, 6847, 6853, 6860, 6866, 6873, 6879, 6885, 6892, 6898, 6904, 6911, 6917, 6923, 6930, 6936, 6942, 6949, 6955, 6961, 6967, 6974, 6980, 6986, 6992, 6999, 7005, 7011, 7017, 7024, 7030, 7036, 7042, 7048, 7055, 7061, 7067, 7073, 7079, 7086, 7092, 7098, 7104, 7110, 7116, 7122, 7129, 7135, 7141, 7147, 7153, 7159, 7165,
		7171, 7177, 7183, 7190, 7196, 7202, 7208, 7214, 7220, 7226, 7232, 7238, 7244, 7250, 7256, 7262, 7268, 7274, 7280, 7286, 7292, 7298, 7304, 7310, 7316, 7322, 7328, 7333, 7339, 7345, 7351, 7357, 7363, 7369, 7375, 7381, 7387, 7392, 7398, 7404, 7410, 7416, 7422, 7428, 7433, 7439, 7445, 7451, 7457, 7462, 7468, 7474, 7480, 7486, 7491, 7497, 7503, 7509, 7514, 7520, 7526, 7532, 7537, 7543, 7549, 7555, 7560, 7566, 7572, 7577, 7583, 7589, 7594, 7600, 7606, 7611, 7617, 7623, 7628, 7634, 7640, 7645, 7651, 7657, 7662, 7668, 7673, 7679, 7685, 7690, 7696, 7701, 7707, 7712, 7718, 7724, 7729, 7735, 7740, 7746, 7751, 7757, 7762, 7768, 7773, 7779, 7784, 7790, 7795, 7801, 7806, 7812, 7817, 7823, 7828, 7833, 7839, 7844, 7850, 7855, 7861, 7866, 7871, 7877, 7882, 7888, 7893, 7898, 7904, 7909, 7914, 7920, 7925, 7931, 7936, 7941, 7947, 7952, 7957, 7963, 7968, 7973, 7978, 7984, 7989, 7994, 8000, 8005, 8010, 8015, 8021, 8026, 8031, 8036, 8042, 8047, 8052, 8057, 8063, 8068, 8073, 8078, 8083, 8089, 8094, 8099, 8104, 8109, 8115, 8120, 8125, 8130, 8135, 8140, 8145, 8151, 8156, 8161, 8166, 8171, 8176, 8181, 8186,
		8192
	};

	template<typename _PRINT_FNC>
	void MakeArcTanTable(_PRINT_FNC printFnc)
	{
		for (int i = 0; i < 1'024; i++)
		{
			double angle = atan(i / 1'024.0) / (0.5 * 3.14159265358979323846264338327950288) * 16'384;
			Angle result = static_cast<Angle>(angle);
			printFnc(result);
		}
	}
#if 0
	int curr = 0;
	MathUtil::MakeArcTanTable(
		[&curr](Angle v)
		{
			if ((v / 1024) != (curr / 1024))
			{
				curr = v;
				_RPTW0(_CRT_WARN, L"\r\n");
			}
			_RPTW0(_CRT_WARN, std::format(L"{}, ", v).c_str());
		}
	);
#endif
}
