// ============================================================================
// myungdal tech-demo project
// 
// Author: 안명달 (Myungdal Ahn)
// Email: mooondal@gmail.com
// GitHub: https://github.com/myungdal/tech_demo.git
// ============================================================================


#include "ClientPlayerController.h"

#include "Packet/NetworkPacketAutoGenerated/PACKET_CD.h"

#include "ClientUtil/ClientStringUtil.h"
#include "Util/SocketUtil/SocketUtil.h"
#include "GameFramework/InputSettings.h"
#include "Engine/StreamableManager.h"
#include "Engine/AssetManager.h"
#include "GameFramework/TouchInterface.h"


#if 0
// Cron 테스트
#include "Util/CronUtil.h"
#endif

bool AClientPlayerController::ProcessConsoleExec(const TCHAR* Cmd, FOutputDevice& Ar, UObject* Executor)
{
	if (true == Super::ProcessConsoleExec(Cmd, Ar, Executor))
		return true;

#if 0

	// Cron 테스트
	const TCHAR* cronExpr = Cmd; // TEXT("0 0 5 * * 1,3,5");
	const FString description = CronUtil::DescriptChar(cronExpr);

	UE_LOG(LogTemp, Display, TEXT("expression: %s"), cronExpr);
	UE_LOG(LogTemp, Display, TEXT("description: %s"), *description);

#else

	SocketUtil::Send<CD_REQ_CHEAT::Writer> wp(REQ);
	wp.SetValues(
		*ClientStringUtil::s_to_w(Cmd)
	);

#endif

	return true;
}

void AClientPlayerController::BeginPlay()
{
	Super::BeginPlay();

	SetVirtualJoystickVisibility(false);
}

void AClientPlayerController::SetTouchInterfaceEnabled(bool bEnabled)
{
	SetVirtualJoystickVisibility(bEnabled);
}
