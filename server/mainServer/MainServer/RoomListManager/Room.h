// ============================================================================
// myungdal tech-demo project
// 
// Author: 안명달 (Myungdal Ahn)
// Email: mooondal@gmail.com
// GitHub: https://github.com/myungdal/tech_demo.git
// ============================================================================

#pragma once

#include "Packet/BasePacketAutoGenerated/PACKET_COMMON.h"


class Room
{
private:
	using UserMap = std::unordered_map<UserId, PacketKeep<USER>>;
	using UserTable = std::unordered_map<AppId, UserMap>;

	RoomId mRoomId = INVALID_UUID;
	RoomType mRoomType = RoomType::NONE;

	UserTable mUserTable;

public:
	explicit Room(RoomId roomId, RoomType roomType);

	void AddUser(AppId appId, const USER& user);
	void RemoveUser(AppId appId, UserId userId);
	void RemoveUserAll(AppId appId);

	bool IsEmpty() const { return mUserTable.empty(); }
	const UserTable& GetUserTable() const { return mUserTable; }
};
