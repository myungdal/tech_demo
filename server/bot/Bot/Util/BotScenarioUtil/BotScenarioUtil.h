// ============================================================================
// myungdal tech-demo project
// 
// Author: 안명달 (Myungdal Ahn)
// Email: mooondal@gmail.com
// GitHub: https://github.com/myungdal/tech_demo.git
// ============================================================================

#pragma once

#include "Packet/NetworkPacketAutoGenerated/PacketFwd.h"


bool ValidatePacket(NetworkPacket& rp);

template <typename _Owner>
HandleResult DispatchPacket(MAYBE_UNUSED uint64_t socket, _Owner* owner, NetworkPacket& rp)
{
	{
		const HandleResult handleResult = DispatchPacketMC(0, owner, rp);

		if (handleResult != HandleResult::NOT_EXISTS)
			return handleResult;
	}
	{
		const HandleResult handleResult = DispatchPacketFC(0, owner, rp);

		if (handleResult != HandleResult::NOT_EXISTS)
			return handleResult;
	}
	{
		const HandleResult handleResult = DispatchPacketDC(0, owner, rp);

		if (handleResult != HandleResult::NOT_EXISTS)
			return handleResult;
	}
	{
		const HandleResult handleResult = DispatchPacketGC(0, owner, rp);

		if (handleResult != HandleResult::NOT_EXISTS)
			return handleResult;
	}
	{
		const HandleResult handleResult = DispatchPacketBC(0, owner, rp);

		if (handleResult != HandleResult::NOT_EXISTS)
			return handleResult;
	}

	return HandleResult::NOT_EXISTS;
}

template <typename _Parent, typename _Owner>
HandleResult DispatchPacketToParent(MAYBE_UNUSED uint64_t socket, _Owner* owner, NetworkPacket& rp)
{
	{
		const HandleResult handleResult = DispatchPacketFC<_Parent>(0, owner, rp);

		if (handleResult != HandleResult::NOT_EXISTS)
			return handleResult;
	}
	{
		const HandleResult handleResult = DispatchPacketDC<_Parent>(0, owner, rp);

		if (handleResult != HandleResult::NOT_EXISTS)
			return handleResult;
	}
	{
		const HandleResult handleResult = DispatchPacketGC<_Parent>(0, owner, rp);

		if (handleResult != HandleResult::NOT_EXISTS)
			return handleResult;
	}
	{
		const HandleResult handleResult = DispatchPacketBC<_Parent>(0, owner, rp);

		if (handleResult != HandleResult::NOT_EXISTS)
			return handleResult;
	}

	return HandleResult::NOT_EXISTS;
}
