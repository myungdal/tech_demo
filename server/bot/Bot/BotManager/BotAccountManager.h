// ============================================================================
// myungdal tech-demo project
// 
// Author: 안명달 (Myungdal Ahn)
// Email: mooondal@gmail.com
// GitHub: https://github.com/myungdal/tech_demo.git
// ============================================================================

#pragma once

#include "Packet/BasePacketAutoGenerated/PACKET_COMMON.h"


// 봇 계정 정보를 JSON 파일로 저장/로드하는 관리자
class BotAccountManager
{
private:
	using BotAccountMap = std::map<BotId, PacketKeep<ACCOUNT>>;

	Lock mLock;
	BotAccountMap mBotAccountMap;
	std::wstring mIpAddress = L"";

public:
	BotAccountManager();

public:
	void Load();
	void Save();
	void Add(BotId botId, const ACCOUNT& account);
	void Remove(BotId botId);
	std::pair<const ACCOUNT*, WriteLock> Find(BotId botId);
};

inline std::shared_ptr<BotAccountManager> gBotAccountManager = nullptr;
