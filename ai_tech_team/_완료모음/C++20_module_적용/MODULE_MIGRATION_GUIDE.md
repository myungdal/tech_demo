# ���� ������Ʈ ��� ��ȯ ���̵�

## ����

ServerEngine�� C++20 ����� Ȱ���Ͽ� ���� ������Ʈ�� cpp ���Ͽ��� `import ServerEngine;`�� ����ϴ� ����Դϴ�.

## ��ȯ ���� ����

- ServerEngine ������Ʈ�� ��� ��� ���� ����
- �ش� ������Ʈ�� `.ixx` ������ ���� (��: `Shell.ixx`, `MainServer.ixx`)

## ��ȯ �ܰ�

### 1�ܰ�: pch_module.h ����

`{Project}/PCH/pch_module.h` ���� ����:

```cpp
// pch_module.h - ��� import�� PCH
// ServerEngine ����� �������� ���� - import ServerEngine; ���� ��ü

#pragma once

#pragma warning(disable: 5028)  // C5028 ��� ��Ȱ��ȭ (���+��� ȥ�� �� �߻�)

// �⺻ ��Ŷ PCH (ServerEngine ��� ����)
#include "Packet/PCH/pch_packet.h"

// ��ũ�� (��� export �Ұ� - ��� �ʼ�)
#include "ServerEngine/Log/LogInternal/LogQueue.h"
#include "ServerEngine/Core/Macros.h"

// CommitType (DbUtil ��� �� �ʿ�)
#include "ServerEngine/Db/DbSessionBase/CommitType.h"

// PacketUtil (Packet ������Ʈ - ��� export ��� �ƴ�)
#include "ServerEngine/Util/PacketUtil/PacketUtil.h"
```

### 2�ܰ�: pch_module.cpp ����

`{Project}/PCH/pch_module.cpp` ���� ����:

```cpp
// pch_module.cpp - ��� import�� PCH ����
#include "{Project}/PCH/pch_module.h"
```

**����:** include ��δ� **��ü ���**�� ����ؾ� �մϴ�!
- ? `#include "pch_module.h"`
- ? `#include "Shell/PCH/pch_module.h"`

### 3�ܰ�: vcxproj ����

#### 3-1. ClInclude�� pch_module.h �߰�

```xml
<ClInclude Include="{Project}\PCH\pch.h" />
<ClInclude Include="{Project}\PCH\pch_module.h" />  <!-- �߰� -->
```

#### 3-2. ClCompile�� pch_module.cpp �߰� (Create PCH)

```xml
<ClCompile Include="{Project}\PCH\pch_module.cpp">
  <PrecompiledHeader Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">Create</PrecompiledHeader>
  <PrecompiledHeader Condition="'$(Configuration)|$(Platform)'=='Release|x64'">Create</PrecompiledHeader>
  <PrecompiledHeaderFile Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">{Project}/PCH/pch_module.h</PrecompiledHeaderFile>
  <PrecompiledHeaderFile Condition="'$(Configuration)|$(Platform)'=='Release|x64'">{Project}/PCH/pch_module.h</PrecompiledHeaderFile>
</ClCompile>
```

#### 3-3. ��ȯ�� cpp ���Ͽ� Use pch_module.h ����

```xml
<ClCompile Include="{Project}\App\{App}.cpp">
  <PrecompiledHeader Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">Use</PrecompiledHeader>
  <PrecompiledHeader Condition="'$(Configuration)|$(Platform)'=='Release|x64'">Use</PrecompiledHeader>
  <PrecompiledHeaderFile Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">{Project}/PCH/pch_module.h</PrecompiledHeaderFile>
  <PrecompiledHeaderFile Condition="'$(Configuration)|$(Platform)'=='Release|x64'">{Project}/PCH/pch_module.h</PrecompiledHeaderFile>
</ClCompile>
```

### 4�ܰ�: cpp ���� ����

#### ���� ��:

```cpp
#include "ShellApp.h"

#include "ServerEngine/AppConfigManager/AppConfigManager.h"
#include "ServerEngine/Thread/ThreadImpl/ConsoleThread.h"

#include "Shell/Socket/SocketShellToMain.h"
```

#### ���� ��:

```cpp
// ��� import ��� TU
#include "Shell/PCH/pch_module.h"

import ServerEngine;

#include "Shell/App/ShellApp.h"
#include "Shell/Socket/SocketShellToMain.h"
```

**���� ����:**
1. ù �ٿ� `#include "{Project}/PCH/pch_module.h"` �߰�
2. `import ServerEngine;` �߰�
3. `ServerEngine/*` include ���� (��⿡�� export��)
4. �ڽ��� ����� ��ü ��η� include

## ��⿡�� export�Ǵ� �͵�

`import ServerEngine;`���� ���� ������ �ֿ� Ÿ��/����:

| ī�װ�� | ���� |
|----------|------|
| App | `AppBase`, `AppConfigManager`, `AppConfigData`, `gAppConfigManager` |
| DB | `MainDbSession`, `UserDbSession`, `CommitType`, `gMainDbConnHolder` |
| Network | `NetworkManager`, `SocketBase`, `gNetworkManager` |
| Worker | `WorkerManager`, `CoWorker`, `gCoWorker`, `gTimerWorker` |
| Thread | `ConsoleThread`, `WorkerThread` |
| Lock | `Lock`, `ReadLock`, `WriteLock` |
| Log | `LogQueue`, `gLogQueue` |
| Clock | `tClock`, `TlsClock` |
| TLS | `tThreadId`, `tWorkingWorker` |

## ��⿡�� export �Ұ� (��� include �ʼ�)

| ī�װ�� | ���� |
|----------|------|
| ��ũ�� (`_DEBUG_LOG`, `_YIELD_*`) | C++ ��ũ�δ� ��� export �Ұ� |
| `DbUtil` ���ø� �Լ� | ���ø� ���ǰ� ����� �־�� �� |
| `DbSpAutoGenerated/*` | �ڵ����� ����, ��� ��� �ƴ� |
| `PacketUtil` ���ø� �Լ� | ���ø� ���ǰ� ����� �־�� �� |

## ��ȯ �Ұ����� cpp ����

`DbUtil::FetchSp`, `DbUtil::ExecuteSp`�� ����ϴ� cpp�� ���� pch.h ��� ����:

```cpp
// ServerListManager.cpp - ���� ��� ����
#include "ServerListManager.h"

#include "ServerEngine/DbSpAutoGenerated/SP_SERVER.h"
#include "ServerEngine/Util/DbUtil/DbUtil.h"
#include "ServerEngine/Db/MainDb/MainDbSession.h"
```

## ������Ʈ�� ���� ����

| ������Ʈ | ���� | ��ȯ ���� �� | ���� ���� (DbUtil ���) |
|----------|------|-------------|------------------------|
| ServerEngine | ? �Ϸ� | ��� ������ | - |
| MainServer | ? �Ϸ� | 12�� | 5�� (Account, AccountHolder, GameListManager, ServerListManager, Transactor_CM_REQ_AUTH_MODIFY) |
| Shell | ? �Ϸ� | 4�� | 0�� |
| LogServer | ? �Ϸ� | 3�� | 1�� (LogPacketHandler) |
| BridgeServer | ? �Ϸ� | 3�� | 0�� |
| FrontServer | ? �Ϸ� | 10�� | 0�� |
| GameServer | ? �Ϸ� | 10�� | 0�� |
| DbServer | ?? �κпϷ� | 7�� | 11�� (DbUtil ��� Transactor��) |
| Bot | ? �Ϸ� | 10�� | 0�� |
| Test | ? �Ϸ� | Test.ixx ���� | 0�� |

**�� ��ȯ ����**: 59�� (DbUtil �̻�� cpp)
**���� ����**: 17�� (DbUtil �ʼ� - ��ȯ �Ұ�)

## Ʈ�������

### C2857: '#include' ���� �ҽ� ���Ͽ� �����ϴ�

pch_module.cpp�� include ��θ� ��ü ��η� ����:

```cpp
// ? �߸��� ���
#include "pch_module.h"

// ? �ùٸ� ���
#include "Shell/PCH/pch_module.h"
```

### C2011: ���� ������ (CommitType ��)

`import ServerEngine;`�� `#include "DbUtil.h"`�� ���ÿ� ����� �� �߻�.
�ش� cpp�� ���� pch.h ������� ����.

### C5028: ���� ���

`.ixx` ������ GMF�� `#pragma warning(disable: 5028)` �߰�.

