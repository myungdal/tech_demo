# C++ 컨벤션 정리 프로젝트 계획서

## 목표

프로젝트 전체의 C++ 코드 스타일을 일관성 있게 정리하고, `.cursorrules`에 컨벤션을 문서화하여 새로운 코드 작성 시 일관된 스타일을 유지한다.

## 기호 표시 (Legend)

| 기호 | 의미 |
|------|------|
| ✅ | **확정**: 바로 `.cursorrules`에 옮겨도 되는 규칙 |
| ⚠️ | **검토**: 현재 코드베이스에서 혼재 사용되는 패턴 |
| 🔲 | **TBD**: 사용자 피드백/합의 후 확정해야 하는 항목 |
| ❌ | **제외/불가능**: 적용 불가능하거나 적용하지 않을 규칙 |

> 이 문서는 계획서 + 단계(로드맵) + 후보 + 초안(템플릿) + 결정 로그를 담으며,  
> **확정된 컨벤션은 2단계에서 `.cursorrules`로 분리/이관**한다.

---

## 로드맵 (작업 단계)

### ✅ 1단계: 컨벤션 파악 및 분석 (완료)

- 현재 코드베이스에서 잘 작성된 h/cpp 파일을 찾아 샘플로 활용
- 분석 항목:
  - 일관된 네이밍 컨벤션
  - 적절한 파일 크기 (너무 크거나 작지 않은 것)
  - 명확한 구조 (헤더 가드, include 순서, 클래스 구조)
  - 주석 스타일
  - 컨벤션 위반 사례와 패턴

### 🔲 2단계: 컨벤션 문서화

- 1단계에서 분석한 패턴을 바탕으로 공식 규칙 정리
- 사용자 합의 및 피드백 반영
- `.cursorrules`에 C++ 컨벤션 추가

### 🔲 3단계: 리팩토링

- 프로젝트별로 작업 분담하여 리팩토링 진행
- 자동 생성 파일은 제외 (또는 생성기 수정)
  - `autoGenerated` 폴더 하위 파일
  - 파일명에 `autoGenerated` 포함된 파일

---

## 제외 대상

| 경로 | 제외 이유 |
|------|----------|
| `resource/` | 자동 생성 원본 |
| `client/Client/Source/`의 `*AutoGenerated*` | 자동 생성 파일 |
| `server/`의 `autoGenerated` 폴더 | 자동 생성 파일 |

---

## ✅ 확정된 컨벤션

> **확정된 컨벤션 규칙은 `.cursorrules` 파일에 문서화되어 있습니다.**
> - 루트: `.cursorrules` (공통 규칙)
> - 서버: `server/.cursorrules` (서버 전용 규칙)
> - 클라이언트: `client/Client/Source/.cursorrules` (클라이언트 전용 규칙)
> 
> 상세 내용은 위 파일들을 참조하세요.

---

## 체크리스트 (작업 항목)

### 확정 완료

- [x] 파일 인코딩 (UTF-8 with BOM)
- [x] 자동 생성 파일 수정 금지 규칙
- [x] 헤더 가드 스타일 (`#pragma once`)
- [x] 네이밍 규칙 (클래스/함수/변수/상수/매크로)
- [x] 포맷팅 규칙 (들여쓰기/중괄호)
- [x] 클래스 레이아웃 (접근 지정자 순서)
- [x] 주석 규칙 (자연어 기반, Doxygen 미사용)
- [x] C++20 모듈 규칙 (server/)
- [x] virtual/override/final 규칙
- [x] 2단계 결과물: `.cursorrules`에 정리된 규칙 최종 확정 ✅

### 미완료

- [ ] 3단계: 리팩토링 작업 착수

---

## 2단계 결과물: `.cursorrules` 구조 (완료 ✅)

> **확정된 컨벤션은 `.cursorrules` 파일에 문서화되어 있습니다.**

### 루트 `.cursorrules` (공통)

- 인코딩/자동생성 관련 절대 규칙
- DB/Packet/Enum 추가 프로세스

### `server/.cursorrules` (서버 전용)

- C++20 모듈 규칙 (`.ixx` / `export import`)
- `.cpp`에서의 include/import 순서
- 네이밍/포맷팅/주석 규칙

### `client/Client/Source/.cursorrules` (클라이언트 전용)

- UE 모듈 규칙 해설 (표준 모듈 미사용)
- 공유 라이브러리 규칙

---

## 리팩토링 분야(프로젝트) 가이드

### 분야 권장 분류

| 분야 | 경로 |
|------|------|
| 서버 엔진 코어 | `server/serverEngine/ServerEngine/*` |
| 서버 각 실행 서버 | `server/*Server/*` |
| 공유 라이브러리 (클라이언트 공유) | `client/Client/Source/Common\|Packet\|MmoSync/*` |

### 리팩토링 우선순위 (권장)

1. 주석/문서화 규칙 적용 (신규 파일 우선)
2. include/import 순서 정리 (헤더 구조 개선)
3. 네이밍/접근 지정자/레이아웃 정리 (diff 큼)

---

## 진행 상황

- [x] 계획서 작성
- [x] 1단계: 컨벤션 패턴 분석 완료
- [x] 1단계: 사용자 피드백 및 확정
- [ ] 2단계: 프로젝트 1개 선행 테스트 및 컨벤션 문서화 (`.cursorrules` 최종 정리)
- [ ] 3단계: 리팩토링

---

## 다음 액션 (순서)

1. ✅ 이 계획서의 확정된 컨벤션들 검토 완료
2. 🔲 `.cursorrules` 파일들(루트/server/client)에 누락된 규칙 동기화
3. 🔲 자동 생성 파일 식별 규칙 누락 여부 확인 (추가/수정 필요 시 반영)

---

## 관련 문서

> **최신/정확한 규칙은 `.cursorrules` 파일을 참조하세요.**

### .cursorrules 파일 적용 범위

| 파일 | 적용 대상 | 주요 내용 |
|------|----------|----------|
| `.cursorrules` (루트) | **프로젝트 전체** | 인코딩, 자동 생성 파일, DB/패킷 생성 프로세스, C++20 모듈 |
| `server/.cursorrules` | **`server/` 폴더 전체** | 서버 전용 네이밍/포맷팅/모듈 규칙 |
| `client/Client/Source/.cursorrules` | **`client/Client/Source/` 폴더 전체** | 공유 라이브러리 + 언리얼 전용 코드 |

### 공유 라이브러리 규칙 적용 (중요)

| 폴더 | 서버 빌드 | 클라이언트 빌드 | 적용 규칙 |
|------|----------|----------------|----------|
| `client/Client/Source/Common/` | ✅ | ✅ | `client/Client/Source/.cursorrules` |
| `client/Client/Source/MmoSync/` | ✅ | ✅ | `client/Client/Source/.cursorrules` |
| `client/Client/Source/Packet/` | ✅ | ✅ | `client/Client/Source/.cursorrules` |
| `client/Client/Source/SharedLib/` | ✅ | ✅ | `client/Client/Source/.cursorrules` |
| `client/Client/Source/Client/` | ❌ | ✅ | `client/Client/Source/.cursorrules` (언리얼 전용 섹션) |
| `server/*` | ✅ | ❌ | `server/.cursorrules` |

> **참고**: 공유 라이브러리는 서버에서도 컴파일하지만, 소스 코드가 `client/` 폴더에 있으므로  
> `client/Client/Source/.cursorrules`를 따릅니다. 서버 `.cursorrules`는 `server/` 폴더 전용입니다.


